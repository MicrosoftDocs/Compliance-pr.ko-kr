---
title: Microsoft 365의 Exchange Online 데이터 탄력성
description: 이 문서에서는 Exchange Online 및 Microsoft 365 내에서 데이터 탄력성의 다양한 측면에 대한 설명을 찾아보아야 합니다.
ms.author: robmazz
author: robmazz
manager: laurawi
ms.reviewer: sosstah
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- MS-Compliance
f1.keywords:
- NOCSH
ms.custom: seo-marvel-apr2020
titleSuffix: Microsoft Service Assurance
ms.openlocfilehash: 2cdd37d34612421cc7a9e4687134e2a1e2b1aeec
ms.sourcegitcommit: b06fa9f1b230fd5e470817486ea51f460f28b691
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/27/2021
ms.locfileid: "50012944"
---
# <a name="exchange-online-data-resiliency-in-microsoft-365"></a><span data-ttu-id="0d490-103">Microsoft 365의 Exchange Online 데이터 탄력성</span><span class="sxs-lookup"><span data-stu-id="0d490-103">Exchange Online data resiliency in Microsoft 365</span></span>

>[!IMPORTANT]
><span data-ttu-id="0d490-104">사서함 콘텐츠를 보존하는 다양한 방식으로 계속 투자함에 따라 Exchange Online의 EAC(Exchange 관리 센터)에서 In-Place 보류의 사용 중지를 발표하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-104">As we continue to invest in different ways to preserve mailbox content, we're announcing the retirement of In-Place Holds in the Exchange admin center (EAC) in Exchange Online.</span></span> <span data-ttu-id="0d490-105">2020년 7월 1일부터는 보류된 새 In-Place 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-105">Starting July 1, 2020, you won't be able to create new In-Place Holds.</span></span> <span data-ttu-id="0d490-106">그러나 EAC에서 또는 Exchange Online PowerShell에서 **Set-MailboxSearch** cmdlet을 사용하여 In-Place 보류를 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-106">But you'll still be able to manage In-Place Holds in the EAC or by using the **Set-MailboxSearch** cmdlet in Exchange Online PowerShell.</span></span> <span data-ttu-id="0d490-107">그러나 2020년 10월 1일부터는 보류를 관리할 In-Place 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-107">However, starting October 1, 2020, you won't be able to manage In-Place Holds.</span></span> <span data-ttu-id="0d490-108">EAC에서 또는 **Remove-MailboxSearch** cmdlet을 사용하는 것만 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-108">You'll only be able to remove them in the EAC or by using the **Remove-MailboxSearch** cmdlet.</span></span> <span data-ttu-id="0d490-109">Exchange In-Place 및 Exchange Exchange Server 배포에서 보류를 사용하는 것이 계속 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-109">Using In-Place Holds in Exchange Server and Exchange hybrid deployments will still be supported.</span></span> <span data-ttu-id="0d490-110">Exchange Online에서 보류 In-Place 대한 자세한 내용은 레거시 [eDiscovery](https://docs.microsoft.com/microsoft-365/compliance/legacy-ediscovery-retirement)도구의 사용 중지를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="0d490-110">For more information about the retirement of In-Place Holds in Exchange Online, see [Retirement of legacy eDiscovery tools](https://docs.microsoft.com/microsoft-365/compliance/legacy-ediscovery-retirement).</span></span>

<span data-ttu-id="0d490-111">보존 In-Place 보존은 삭제된 항목 및 수정된 항목의 원래 버전을 포함하여 모든 사서함 콘텐츠를 보존합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-111">An In-Place Hold preserves all mailbox content, including deleted items and original versions of modified items.</span></span> <span data-ttu-id="0d490-112">이러한 모든 사서함 항목은 [In-Place eDiscovery 검색에서 반환됩니다.](https://docs.microsoft.com/exchange/security-and-compliance/in-place-ediscovery/in-place-ediscovery)</span><span class="sxs-lookup"><span data-stu-id="0d490-112">All such mailbox items are returned in an [In-Place eDiscovery](https://docs.microsoft.com/exchange/security-and-compliance/in-place-ediscovery/in-place-ediscovery) search.</span></span> <span data-ttu-id="0d490-113">사용자 In-Place 보류를 설정하면 해당 보관 사서함의 콘텐츠(사용하도록 설정된 경우)도 보류되어 eDiscovery 검색에 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-113">When you place an In-Place Hold on a user's mailbox, the contents in the corresponding archive mailbox (if it's enabled) are also placed on hold and returned in an eDiscovery search.</span></span>

<span data-ttu-id="0d490-114">Exchange 데이터베이스에 영향을 줄 수 있는 손상에는 일반적으로 하드웨어(특히 저장소 하드웨어) 문제로 인해 발생하는 물리적 손상과 다른 요인으로 인해 발생하는 논리적 손상의 두 가지 유형이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-114">There are two types of corruption that can affect an Exchange database: physical corruption, which is typically caused by hardware (in particular, storage hardware) problems, and logical corruption, which occurs due to other factors.</span></span> <span data-ttu-id="0d490-115">일반적으로 Exchange 데이터베이스 내에서 발생할 수 있는 논리적 손상에는 두 가지 유형이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-115">Generally, there are two types of logical corruption that can occur within an Exchange database:</span></span>

- <span data-ttu-id="0d490-116">**데이터베이스 논리적 손상** - 데이터베이스 페이지 체크 um이 일치하지만 페이지의 데이터가 논리적으로 잘못되었습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-116">**Database logical corruption** - The database page checksum matches, but the data on the page is wrong logically.</span></span> <span data-ttu-id="0d490-117">이 오류는 데이터베이스 엔진(ESE(Extensible Storage Engine))이 데이터베이스 페이지를 작성하려고 할 때 그리고 운영 체제에서 성공 메시지를 반환하는 경우에도 데이터가 디스크에 기록되지 않는 경우 또는 잘못된 장소에 기록될 때 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-117">This can occur when the database engine (the Extensible Storage Engine (ESE)) attempts to write a database page and even though the operating system returns a success message, the data is either never written to the disk or it's written to the wrong place.</span></span> <span data-ttu-id="0d490-118">이를 *손실 플러시* 라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-118">This is referred to as a *lost flush*.</span></span> <span data-ttu-id="0d490-119">ESE에는 데이터베이스 및 기타 데이터 손실 시나리오의 물리적 손상을 방지하도록 설계된 다양한 기능과 보호 기능이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-119">ESE includes numerous features and safeguards that are designed to prevent physical corruption of a database and other data loss scenarios.</span></span> <span data-ttu-id="0d490-120">손실된 플러시의 데이터 손실을 방지하기 위해 ESE에는 데이터베이스의 손실 플러시 감지 메커니즘과 이를 수정하는 기능(단일 페이지 복원)이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-120">To prevent lost flushes from losing data, ESE includes a lost flush detection mechanism in the database along with a feature (single page restore) to correct it.</span></span>
- <span data-ttu-id="0d490-121">**저장소 논리적** 손상 - 데이터가 사용자가 예상하지 않는 방식으로 추가, 삭제 또는 조작됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-121">**Store logical corruption** - Data is added, deleted, or manipulated in a way that the user doesn't expect.</span></span> <span data-ttu-id="0d490-122">이러한 경우는 타사 응용 프로그램으로 인해 발생됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-122">These cases are caused by third-party applications.</span></span> <span data-ttu-id="0d490-123">일반적으로 사용자가 손상된 것으로 보기는 하여 손상됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-123">It's usually corruption in the sense that the user views it as corruption.</span></span> <span data-ttu-id="0d490-124">Exchange 저장소는 논리적 손상을 생성한 트랜잭션을 일련의 유효한 MAPI 작업으로 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-124">The Exchange store considers the transaction that produced the logical corruption to be a series of valid MAPI operations.</span></span> <span data-ttu-id="0d490-125">Exchange Online의 [In-Place Hold](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) 기능은 저장소 논리적 손상으로부터 보호합니다(사용자 또는 응용 프로그램에 의해 콘텐츠가 영구적으로 삭제되지 않도록 방지).</span><span class="sxs-lookup"><span data-stu-id="0d490-125">The [In-Place Hold](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) features in Exchange Online provides protection from store logical corruption (because it prevents content from being permanently deleted by a user or an application).</span></span> 

<span data-ttu-id="0d490-126">Exchange Online은 로그 검사와 로그 재생 중에 복제된 로그 파일에 대해 여러 가지 일관성 검사를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-126">Exchange Online performs several consistency checks on replicated log files during both log inspection and log replay.</span></span> <span data-ttu-id="0d490-127">이러한 일관성 확인은 물리적 손상이 시스템에 의해 복제되는 것을 방지합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-127">These consistency checks prevent physical corruption from being replicated by the system.</span></span> <span data-ttu-id="0d490-128">예를 들어 로그 검사 중에 로그 파일을 확인하고 로그 파일에 기록된 체크 um이 메모리에 생성된 체크 um과 일치하는지 확인하는 물리적 무결성 검사가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-128">For example, during log inspection, there is a physical integrity check that verifies the log file and validates that the checksum recorded in the log file matches the checksum generated in memory.</span></span> <span data-ttu-id="0d490-129">또한 로그 파일 헤더를 검사하여 로그 헤더에 기록된 로그 파일 서명이 로그 파일의 서명과 일치하는지 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-129">In addition, the log file header is examined to make sure the log file signature recorded in the log header matches that of the log file.</span></span> <span data-ttu-id="0d490-130">로그를 재생하는 동안 로그 파일은 추가적으로 신중하게 진행됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-130">During log replay, the log file undergoes further scrutiny.</span></span> <span data-ttu-id="0d490-131">예를 들어 데이터베이스 헤더에는 일치하는지 확인하기 위해 로그 파일의 서명과 비교된 로그 서명도 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-131">For example, the database header also contains the log signature that is compared with the log file's signature to ensure they match.</span></span> 

<span data-ttu-id="0d490-132">Exchange Online의 사서함 데이터 손상 방지는 여러 서버 및 여러 데이터 센터에서 응용 프로그램 수준 복제를 활용하는 복원 전략인 Exchange Native Data Protection과 손상 또는 기타 이유로 인해 데이터가 손실되지 못하게 보호하는 다른 기능을 사용하여 달성됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-132">Protection against corruption of mailbox data in Exchange Online is achieved by using Exchange Native Data Protection, a resiliency strategy that leverages application-level replication across multiple servers and multiple datacenters along with other features that help protect data from being lost due to corruption or other reasons.</span></span> <span data-ttu-id="0d490-133">이러한 기능에는 Microsoft 또는 Exchange Online 응용 프로그램 자체에서 관리하는 다음과 같은 기본 기능이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-133">These features include native features that are managed by Microsoft or the Exchange Online application itself, such as:</span></span>

- [<span data-ttu-id="0d490-134">데이터 가용성 그룹</span><span class="sxs-lookup"><span data-stu-id="0d490-134">Data Availability Groups</span></span>](https://docs.microsoft.com/exchange/back-up-email)
- <span data-ttu-id="0d490-135">단일 비트 수정</span><span class="sxs-lookup"><span data-stu-id="0d490-135">Single Bit Correction</span></span> 
- <span data-ttu-id="0d490-136">온라인 데이터베이스 검사</span><span class="sxs-lookup"><span data-stu-id="0d490-136">Online Database Scanning</span></span> 
- <span data-ttu-id="0d490-137">손실 플러시 감지</span><span class="sxs-lookup"><span data-stu-id="0d490-137">Lost Flush Detection</span></span> 
- <span data-ttu-id="0d490-138">단일 페이지 복원</span><span class="sxs-lookup"><span data-stu-id="0d490-138">Single Page Restore</span></span> 
- <span data-ttu-id="0d490-139">사서함 복제 서비스</span><span class="sxs-lookup"><span data-stu-id="0d490-139">Mailbox Replication Service</span></span> 
- <span data-ttu-id="0d490-140">로그 파일 검사</span><span class="sxs-lookup"><span data-stu-id="0d490-140">Log File Checks</span></span> 
- <span data-ttu-id="0d490-141">탄력적인 파일 시스템에 배포</span><span class="sxs-lookup"><span data-stu-id="0d490-141">Deployment on Resilient File System</span></span> 

<span data-ttu-id="0d490-142">이전에 나열된 기본 기능에 대한 자세한 내용은 하이퍼링크를 선택하고 추가 정보 및 하이퍼링크가 없는 항목에 대한 자세한 내용은 다음을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="0d490-142">For more information on the native features listed previously, select the hyperlinks, and see the following for additional information and for details on items without hyperlinks.</span></span> <span data-ttu-id="0d490-143">Exchange Online에는 이러한 기본 기능 외에도 다음과 같이 고객이 관리할 수 있는 데이터 탄력성 기능도 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-143">In addition to these native features, Exchange Online also includes data resiliency features that customers can manage, such as:</span></span> 
- [<span data-ttu-id="0d490-144">단일 항목 복구(기본적으로 사용)</span><span class="sxs-lookup"><span data-stu-id="0d490-144">Single Item Recovery (enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [<span data-ttu-id="0d490-145">원본 위치 유지 및 소송 보존</span><span class="sxs-lookup"><span data-stu-id="0d490-145">In-Place Hold and Litigation Hold</span></span>](https://docs.microsoft.com/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [<span data-ttu-id="0d490-146">삭제된 항목 보존 및 Soft-Deleted 사서함(둘 다 기본적으로 사용)</span><span class="sxs-lookup"><span data-stu-id="0d490-146">Deleted Item Retention and Soft-Deleted Mailboxes (both enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a><span data-ttu-id="0d490-147">데이터베이스 사용 가능 그룹</span><span class="sxs-lookup"><span data-stu-id="0d490-147">Database Availability Groups</span></span> 
<span data-ttu-id="0d490-148">Microsoft 365의 모든 사서함 데이터베이스는 [DAG(데이터베이스](https://docs.microsoft.com/exchange/back-up-email) 사용 가능 그룹)에서 호스트되어 동일한 지역 내의 지리적으로 분리된 데이터 센터로 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-148">Every mailbox database in Microsoft 365 is hosted in a [database availability group (DAG)](https://docs.microsoft.com/exchange/back-up-email) and replicated to geographically separate datacenters within the same region.</span></span> <span data-ttu-id="0d490-149">가장 일반적인 구성은 4개의 데이터 센터에 있는 네 개의 데이터베이스 복사본입니다. 그러나 일부 지역은 데이터 센터 수가 적습니다(데이터베이스는 인도의 3개의 데이터 센터와 오스트레일리아와 일본의 두 데이터 센터로 복제됩니다).</span><span class="sxs-lookup"><span data-stu-id="0d490-149">The most common configuration is four database copies in four datacenters; however, some regions have fewer datacenters (databases are replicated to three datacenters in India, and two datacenters in Australia and Japan).</span></span> <span data-ttu-id="0d490-150">그러나 모든 사서함 데이터베이스에는 여러 데이터 센터에 분산된 복사본 4개가 있어 사서함 데이터가 소프트웨어, 하드웨어 및 데이터 센터 오류로부터 보호됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-150">But in all cases, every mailbox database has four copies that are distributed across multiple datacenters, thereby ensuring that mailbox data is protected from software, hardware, and even datacenter failures.</span></span> 

<span data-ttu-id="0d490-151">이 4개 복사본 중 세 개는 고가용성으로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-151">Out of these four copies, three of them are configured as highly available.</span></span> <span data-ttu-id="0d490-152">네 번째 복사본은 지명된 데이터베이스 [복사본으로 구성됩니다.](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies)</span><span class="sxs-lookup"><span data-stu-id="0d490-152">The fourth copy is configured as a [lagged database copy](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies).</span></span> <span data-ttu-id="0d490-153">지체된 데이터베이스 복사본은 개별 사서함 복구 또는 사서함 항목 복구를 위한 것이 아니며,</span><span class="sxs-lookup"><span data-stu-id="0d490-153">The lagged database copy is not intended for individual mailbox recovery or mailbox item recovery.</span></span> <span data-ttu-id="0d490-154">이 도구의 목적은 시스템 전체의 치명적인 논리적 손상이 드물게 발생하면 복구 메커니즘을 제공하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-154">Its purpose is to provide a recovery mechanism for the rare event of system-wide, catastrophic logical corruption.</span></span> 

<span data-ttu-id="0d490-155">Exchange Online에서 지워진 데이터베이스 복사본은 7일 로그 파일 재생 시간으로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-155">Lagged database copies in Exchange Online are configured with a seven-day log file replay lag time.</span></span> <span data-ttu-id="0d490-156">또한 Exchange Replay Lag Manager를 사용하면 지워진 복사본에 대해 동적 로그 파일이 재생되어 데이터베이스 복사본이 자체 복구 및 로그 파일 증가를 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-156">In addition, the Exchange Replay Lag Manager is enabled to provide dynamic log file play down for lagged copies to allow lagged database copies to self-repair and manage log file growth.</span></span> <span data-ttu-id="0d490-157">Exchange Online에서는 지각된 데이터베이스 복사본이 사용하지만 이러한 복사본이 보장된 지정 시간 백업이 아니라는 점에 유의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-157">Although lagged database copies are used in Exchange Online, it is important to understand that they are not a guaranteed point-in-time backup.</span></span> <span data-ttu-id="0d490-158">Exchange Online에서 지워진 데이터베이스 복사본은 디스크 오류로 인해 대기 복사본이 포함된 디스크가 손실되는 기간, 자동 재생으로 인한 고가용성 복사본이 되기 때문에 가용성 임계값(일반적으로 약 90%)을 잃고, 대기된 데이터베이스 복사본이 로그 재생 큐를 다시 구성하는 기간으로 인해 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-158">Lagged database copies in Exchange Online have an availability threshold, typically around 90%, due to periods where the disk containing a lagged copy is lost due to disk failure, the lagged copy becoming a highly available copy (due to automatic play down), as well as the periods where the lagged database copy is rebuilding the log replay queue.</span></span> 

## <a name="transport-resilience"></a><span data-ttu-id="0d490-159">전송 탄력성</span><span class="sxs-lookup"><span data-stu-id="0d490-159">Transport Resilience</span></span> 
<span data-ttu-id="0d490-160">Exchange Online에는 섀도 중복성 및 보안 네트워크의 두 가지 기본 전송 탄력 기능이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-160">Exchange Online includes two primary transport resilience features: Shadow Redundancy and Safety Net.</span></span> <span data-ttu-id="0d490-161">섀도 중복성은 메시지가 전송 중일 때 메시지의 중복 복사본을 보관합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-161">Shadow Redundancy keeps a redundant copy of a message while it is in transit.</span></span> <span data-ttu-id="0d490-162">보안 네트워크는 메시지가 배달된 후 메시지의 중복 복사본을 보관합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-162">Safety Net keeps a redundant copy of a message after the message is successfully delivered.</span></span> 

<span data-ttu-id="0d490-163">섀도 중복성으로 각 Exchange Online 전송 서버는 보내는 서버에 메시지를 성공적으로 받기 전에 받은 각 메시지의 복사본을 만드는 데 성공합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-163">With Shadow Redundancy, each Exchange Online transport server makes a copy of each message it receives before it acknowledges successfully receiving the message to the sending server.</span></span> <span data-ttu-id="0d490-164">이렇게 하면 전송 파이프라인의 모든 메시지가 전송 중 중복됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-164">This makes all messages in the transport pipeline redundant while in transit.</span></span> <span data-ttu-id="0d490-165">Exchange Online에서 원본 메시지가 전송 중 손실된 것으로 확인하면 메시지의 중복 복사본이 다시 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-165">If Exchange Online determines the original message was lost in transit, a redundant copy of the message is redelivered.</span></span> 

<span data-ttu-id="0d490-166">보안 네트워크는 사서함 서버의 전송 서비스에 연결된 전송 큐입니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-166">Safety Net is a transport queue that is associated with the Transport service on a Mailbox server.</span></span> <span data-ttu-id="0d490-167">이 큐는 서버에 의해 성공적으로 처리된 메시지의 복사본을 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-167">This queue stores copies of messages that were successfully processed by the server.</span></span> <span data-ttu-id="0d490-168">사서함 데이터베이스 또는 서버 오류가 발생하여 사서함 데이터베이스의 기한이 지난 복사본을 활성화해야 하는 경우 보안 네트워크 큐의 메시지가 사서함 데이터베이스의 새 활성 복사본으로 자동으로 다시 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-168">When a mailbox database or server failure requires activating an out-of-date copy of the mailbox database, messages in the Safety Net queue are automatically resubmitted to the new active copy of the mailbox database.</span></span> <span data-ttu-id="0d490-169">보안 네트워크도 중복되므로 단일 오류 지점으로 전송이 제거됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-169">Safety Net is also redundant, thereby eliminating transport as a single point of failure.</span></span> <span data-ttu-id="0d490-170">기본 보안 네트워크와 섀도 보안 네트워크의 개념을 사용하며, 기본 보안 네트워크가 12시간 이상 사용할 수 없는 경우 다시 전송 요청은 섀도 다시 전송 요청이 되고 메시지는 섀도 보안 네트워크에서 다시 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-170">It uses the concept of a Primary Safety Net and a Shadow Safety Net wherein if the Primary Safety Net is unavailable for more than 12 hours, resubmit requests become shadow resubmit requests, and messages are redelivered from the Shadow Safety Net.</span></span>

<span data-ttu-id="0d490-171">보안 네트워크에서 메시지 다시 전송은 DAG 및 사서함 데이터베이스 복사본을 관리하는 Microsoft Exchange Replication Service의 Active Manager 구성 요소에 의해 자동으로 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-171">Message resubmissions from Safety Net are automatically initiated by the Active Manager component of the Microsoft Exchange Replication service that manages DAGs and mailbox database copies.</span></span> <span data-ttu-id="0d490-172">보안 네트워크에서 메시지를 다시 전송하는 데 수동 작업은 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-172">No manual actions are required to resubmit messages from Safety Net.</span></span> 

## <a name="single-bit-correction"></a><span data-ttu-id="0d490-173">단일 비트 수정</span><span class="sxs-lookup"><span data-stu-id="0d490-173">Single Bit Correction</span></span> 
<span data-ttu-id="0d490-174">ESE에는 하드웨어 오류의 결과인 물리적 손상을 나타내는 단일 비트 CRC 오류(단일 비트 대칭 이동)를 검색하고 해결하는 메커니즘이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-174">ESE includes a mechanism to detect and resolve single-bit CRC errors (also known as single-bit flips) that are the result of hardware errors (and as such they represent physical corruption).</span></span> <span data-ttu-id="0d490-175">이러한 오류가 발생하면 ESE에서 자동으로 오류를 수정하고 이벤트 로그에 이벤트를 기록합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-175">When these errors occur, ESE automatically corrects them and logs an event in the event log.</span></span> 

## <a name="online-database-scanning"></a><span data-ttu-id="0d490-176">온라인 데이터베이스 검사</span><span class="sxs-lookup"><span data-stu-id="0d490-176">Online Database Scanning</span></span> 
<span data-ttu-id="0d490-177">온라인 데이터베이스 검색(데이터베이스 확인 합계라고도함)은 ESE에서 데이터베이스 일관성 검사 기능을 사용하여 각 페이지를 읽고 페이지 손상을 검사하는 프로세스입니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-177">Online database scanning (also known as *database check summing*) is the process where an ESE uses a database consistency checker to read each page and check for page corruption.</span></span> <span data-ttu-id="0d490-178">주요 목적은 트랜잭션 작업에서 검색되지 않을 수 있는 물리적 손상 및 손실된 플러시를 감지하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-178">The primary purpose is to detect physical corruption and lost flushes that may not be getting detected by transactional operations.</span></span> <span data-ttu-id="0d490-179">데이터베이스 검색은 저장소 후 크래시 작업도 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-179">Database scanning also performs post-store crash operations.</span></span> <span data-ttu-id="0d490-180">크래시로 인해 공간이 누출될 수 있으며 온라인 데이터베이스 검색에서 손실된 공간을 찾아서 복구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-180">Space can be leaked due to crashes, and online database scanning finds and recovers lost space.</span></span> <span data-ttu-id="0d490-181">시스템은 모든 데이터베이스가 7일마다 한 번씩 완전히 검사됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-181">The system is designed with the expectation that every database is fully scanned once every seven days.</span></span> 

## <a name="lost-flush-detection"></a><span data-ttu-id="0d490-182">손실 플러시 감지</span><span class="sxs-lookup"><span data-stu-id="0d490-182">Lost Flush Detection</span></span> 
<span data-ttu-id="0d490-183">디스크 하위 시스템/운영 체제가 완료된 것으로 반환한 데이터베이스 쓰기 작업이 실제로 디스크에 기록되지 않았거나 잘못된 위치에 작성된 경우 플러시가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-183">A lost flush occurs when a database write operation that the disk subsystem/operating system returned as completed did not actually get written to disk, or was written in the wrong location.</span></span> <span data-ttu-id="0d490-184">손실 플러시 인시던트는 데이터베이스 논리적 손상을 초래할 수 있으므로 데이터가 손실되지 않도록 ESE에는 손실된 플러시 감지 메커니즘이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-184">Lost flush incidents can result in database logical corruption, so to prevent lost flushes from resulting in lost data, ESE includes a lost flush detection mechanism.</span></span> <span data-ttu-id="0d490-185">데이터베이스 페이지가 수동 복사본에 기록되는 경우 활성 복사본에서 손실된 플러시가 검색됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-185">As database pages are written to passive copies, a check is performed for lost flushes on the active copy.</span></span> <span data-ttu-id="0d490-186">손실 플러시가 감지되면 ESE는 페이지 패치 프로세스를 사용하여 프로세스를 복구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-186">If a lost flush is detected, ESE can repair the process using a page patching process.</span></span> 

## <a name="single-page-restore"></a><span data-ttu-id="0d490-187">단일 페이지 복원</span><span class="sxs-lookup"><span data-stu-id="0d490-187">Single Page Restore</span></span> 
<span data-ttu-id="0d490-188">페이지 패치라고도 하는 단일 페이지 복원은 손상된 데이터베이스 페이지가 정상 복제 데이터베이스의 정상 복사본으로 대체되는 자동 프로세스입니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-188">Single page restore, also known as *page patching*, is an automatic process where corrupt database pages are replaced by healthy copies from a healthy replica.</span></span> <span data-ttu-id="0d490-189">손상된 페이지에 대한 복구 프로세스는 데이터베이스 복사본이 활성 상태인지 수동인지에 따라 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-189">The repair process for a corrupt page depends on whether the database copy is active or passive.</span></span> <span data-ttu-id="0d490-190">활성 데이터베이스 복사본이 손상된 페이지를 만나면 복사하는 페이지가 최신 상태인 경우 해당 복제 데이터베이스 중 하나의 페이지를 복사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-190">When an active database copy encounters a corrupted page, it can copy a page from one of its replicas, provided the page it copies is up to date.</span></span> <span data-ttu-id="0d490-191">이 프로세스는 사서함 데이터베이스 복제의 기초인 로그 스트림에 페이지에 대한 요청을 넣는 것으로 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-191">This process is accomplished by putting a request for the page into the log stream, which is the basis of mailbox database replication.</span></span> <span data-ttu-id="0d490-192">복제 데이터베이스가 페이지 요청을 만나는 즉시 요청하는 데이터베이스 복사본에 페이지 복사본을 보내 응답합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-192">As soon as a replica encounters the page request, it responds by sending a copy of the page to the requesting database copy.</span></span> <span data-ttu-id="0d490-193">또한 단일 페이지 복원은 복제 데이터베이스가 현재 오프라인 상태인 경우에도 활성이 복제 데이터베이스에서 페이지를 요청하는 비동기 통신 메커니즘을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-193">Single page restore also provides an asynchronous communication mechanism for the active to request a page from replicas, even if the replicas are currently offline.</span></span> 

<span data-ttu-id="0d490-194">이러한 복사본은 항상 활성 복사본 뒤에 있기 때문에 수동 데이터베이스 복사본이 손상된 경우 활성 복사본에서 수동 복사본으로 페이지를 복사하는 것이 항상 안전합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-194">In case of corruption in a passive database copy, including a lagged database copy, because these copies are always behind their active copy, it is always safe to copy any page from the active copy to a passive copy.</span></span> <span data-ttu-id="0d490-195">수동 데이터베이스 복사본은 기본적으로 고가용성이 있으므로 페이지 패치 프로세스 중에 로그 재생이 일시 중단되지만 로그 복사는 계속됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-195">A passive database copy is by nature highly available, so during the page patching process, log replaying is suspended, but log copying continues.</span></span> <span data-ttu-id="0d490-196">수동 데이터베이스 복사본은 활성 복사본에서 손상된 페이지의 복사본을 검색하고 필요한 최대 로그 생성 요구 사항을 충족하는 로그 파일이 복사 및 검사될 때까지 기다렸다가 손상된 페이지를 패치합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-196">The passive database copy retrieves a copy of the corrupted page from the active copy, waits until the log file that meets the maximum required log generation requirement is copied and inspected, and then patches the corrupt page.</span></span> <span data-ttu-id="0d490-197">페이지가 패치된 후 로그 재생이 다시 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-197">Once the page has been patched, log replay resumes.</span></span> <span data-ttu-id="0d490-198">이 프로세스는 지워진 데이터베이스 복사본에 대해 동일합니다. 단, 이 경우, 지루한 데이터베이스는 패치 가능한 상태를 달성하는 데 필요한 모든 로그 파일을 먼저 재생합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-198">The process is the same for the lagged database copy, except that the lagged database first replays all log files that are necessary to achieve a patchable state.</span></span> 

## <a name="mailbox-replication-service"></a><span data-ttu-id="0d490-199">사서함 복제 서비스</span><span class="sxs-lookup"><span data-stu-id="0d490-199">Mailbox Replication Service</span></span> 
<span data-ttu-id="0d490-200">사서함 이동은 대규모 전자 메일 서비스를 관리하는 데 핵심적인 부분입니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-200">Moving mailboxes is a key part of managing a large-scale email service.</span></span> <span data-ttu-id="0d490-201">항상 업데이트된 기술 및 하드웨어 및 버전 업그레이드가 있으므로 엔지니어가 이 작업을 수행할 수 있도록 강력하고 제한적인 시스템을 통해 사서함을 사용자에게 투명하게 유지(프로세스 전체에서 온라인에서 유지)하는 것이 핵심입니다. 사서함이 커지고 사서함이 커지면서 프로세스가 원할하게 확장됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-201">There are always updated technologies and hardware and version upgrades to deal with, so having a robust, throttled system that enables our engineers to accomplish this work while keeping the mailbox moves transparent to users (by making sure they stay online throughout the process) is key and making sure that the process scales up gracefully as mailboxes get larger and larger.</span></span> 

<span data-ttu-id="0d490-202">Exchange MRS(사서함 복제 서비스)는 데이터베이스 간에 사서함을 이동하는 업무를 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-202">The Exchange Mailbox Replication Service (MRS) is responsible for moving mailboxes between databases.</span></span> <span data-ttu-id="0d490-203">이동하는 동안 MRS는 사서함 내의 모든 항목에 대한 일관성 검사를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-203">During the move, MRS performs a consistency check on all items within the mailbox.</span></span> <span data-ttu-id="0d490-204">일관성 문제가 발견되면 MRS는 문제를 해결하거나 손상된 항목을 건너뛰어 사서함에서 손상을 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-204">If a consistency issue is found, MRS will either correct the problem, or skip the corrupted items, thereby removing the corruption from the mailbox.</span></span> 

<span data-ttu-id="0d490-205">MRS는 Exchange Online의 구성 요소이기 때문에 향후 감지되는 새로운 형태의 손상을 해결하기 위해 코드를 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-205">Because MRS is a component of Exchange Online, we can make changes in its code to address new forms of corruption that are detected in the future.</span></span> <span data-ttu-id="0d490-206">예를 들어 MRS가 수정할 수 없는 일관성 문제가 감지되면 손상을 분석하고 MRS 코드를 변경하고 불일치(방법을 이해하는 경우)를 수정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-206">For example, if we detect a consistency issue that MRS is not able to fix, we can analyze the corruption, change the MRS code and correct the inconsistency (if we understand how to).</span></span> 

## <a name="log-file-checks"></a><span data-ttu-id="0d490-207">로그 파일 검사</span><span class="sxs-lookup"><span data-stu-id="0d490-207">Log File Checks</span></span> 
<span data-ttu-id="0d490-208">Exchange 데이터베이스에서 생성된 모든 트랜잭션 로그 파일에는 여러 가지 형식의 일관성 확인이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-208">All transaction log files generated by an Exchange database undergo several forms of consistency checks.</span></span> <span data-ttu-id="0d490-209">로그 파일을 만들면 먼저 비트 패턴이 작성된 다음 일련의 로그 쓰기가 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-209">When a log file is created, the first thing done is a bit pattern is written and then a series of log writes is performed.</span></span> <span data-ttu-id="0d490-210">이 구조를 사용하면 Exchange Online에서 일련의 검사(손실 플러시, CRC 및 기타 검사)를 실행하여 기록된 각 로그 파일의 유효성을 검사하고 복제될 때 다시 유효성을 검사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-210">This structure enables Exchange Online to execute a series of checks (lost flush, CRC, and other checks) to validate each log file as it is written, and again as it is replicated.</span></span> 

## <a name="deployment-on-resilient-file-system"></a><span data-ttu-id="0d490-211">탄력적인 파일 시스템에 배포</span><span class="sxs-lookup"><span data-stu-id="0d490-211">Deployment on Resilient File System</span></span> 
<span data-ttu-id="0d490-212">파일 시스템 수준에서 손상이 발생하지 않도록 Exchange Online을 ReFS(복구 파일 시스템) 파티션에 배포하여 향상된 복구 기능을 제공하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-212">To help prevent corruption from occurring at the file system level, Exchange Online is being deployed on Resilient File System (ReFS) partitions to provide improved recovery capabilities.</span></span> <span data-ttu-id="0d490-213">ReFS는 데이터 Windows Server 2012 보다 탄력적으로 사용할 수 있도록 설계된 파일 시스템으로, 데이터 가용성과 무결성을 최대화합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-213">ReFS is a file system in Windows Server 2012 and later that is designed to be more resilient against data corruption thereby maximizing data availability and integrity.</span></span> <span data-ttu-id="0d490-214">특히 ReFS는 메타데이터가 업데이트되는 방식이 개선되어 데이터를 보다 잘 보호하고 데이터 손상 사례를 줄일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-214">Specifically, ReFS brings improvements in the way that metadata is updated which offers better protection for data and reduces data corruption cases.</span></span> <span data-ttu-id="0d490-215">또한 체크 아웃을 사용하여 파일 데이터 및 메타데이터의 무결성을 확인하여 데이터 손상을 쉽게 찾아서 복구할 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-215">It also uses checksums to verify the integrity of file data and metadata ensuring that data corruption is easily found and repaired.</span></span> 

<span data-ttu-id="0d490-216">Exchange Online은 몇 가지 ReFS 이점을 활용합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-216">Exchange Online takes advantage of several ReFS benefits:</span></span> 
- <span data-ttu-id="0d490-217">데이터 무결성의 탄력성은 데이터 손상 인시던트 수가 적다는 의미입니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-217">More resiliency in data integrity means fewer data corruption incidents.</span></span> <span data-ttu-id="0d490-218">손상 인시던트 수를 줄이면 불필요한 데이터베이스 다시 시드 횟수가 감소합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-218">Reducing the number of corruption incidents means fewer unnecessary database reseeds.</span></span> 
- <span data-ttu-id="0d490-219">데이터 볼륨에서 회색 오류가 발생하기 전에 고객 데이터 손상을 보다 빨리 감지할 수 있도록 메타데이터에서 실행되는 체크 럼입니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-219">Checksum running on metadata enabling detections of corruption cases sooner and more deterministically, allowing us to fix customer data corruption before grey failures occur on data volumes.</span></span>
- <span data-ttu-id="0d490-220">성능에 영향을 줄 수 없는 대규모 데이터 집합(페타바이트 및 더 큰 데이터 집합)에서 잘 작동하도록 디자인</span><span class="sxs-lookup"><span data-stu-id="0d490-220">Designed to work well with large data sets—petabytes and larger—without performance impact</span></span>
- <span data-ttu-id="0d490-221">Exchange Online에서 사용하는 기타 기능(예: BitLocker 암호화)에 대한 지원</span><span class="sxs-lookup"><span data-stu-id="0d490-221">Support for other features used by Exchange Online, such as BitLocker encryption.</span></span> 

<span data-ttu-id="0d490-222">Exchange Online은 다른 ReFS 기능의 이점도 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-222">Exchange Online also benefits from other ReFS features:</span></span> 
- <span data-ttu-id="0d490-223">**무결성(무결성 스트림)** - ReFS는 일반적으로 데이터 손실을 일으킬 수 있는 많은 일반적인 오류로부터 데이터를 보호하는 방식으로 데이터를 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-223">**Integrity (Integrity Streams)** - ReFS stores data in a way that protects it from many of the common errors that can normally cause data loss.</span></span> <span data-ttu-id="0d490-224">Microsoft 365 검색은 무결성 스트림을 사용하여 초기 디스크 손상 감지 및 파일 콘텐츠 체크 아웃에 도움을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-224">Microsoft 365 Search uses Integrity Streams to help with early disk corruption detection and checksums of file content.</span></span> <span data-ttu-id="0d490-225">또한 이 기능은 "쓰러진 쓰기"로 인한 손상 인시던트(정전 등으로 인해 쓰기 작업이 완료되지 않은 경우)를 줄입니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-225">The feature also reduces corruption incidents caused by “Torn Writes” (when a write operation does not complete due to power outages, etc.).</span></span> 
- <span data-ttu-id="0d490-226">**가용성(Salvage)** - ReFS는 데이터의 가용성에 우선 순위를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-226">**Availability (Salvage)** - ReFS prioritizes the availability of data.</span></span> <span data-ttu-id="0d490-227">지금까지 파일 시스템은 복구를 위해 오프라인으로 전환해야 하는 데이터 손상에 주로 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-227">Historically, file systems were often susceptible to data corruption that would require the system to be taken offline for repair.</span></span> <span data-ttu-id="0d490-228">드물지만 손상이 발생하는 경우 ReFS는 복구를 구현합니다. 즉, 라이브 볼륨의 네임스페이스에서 손상된 데이터를 제거하고 복구할 수 없는 손상 데이터에 의해 양호한 데이터가 부정적인 영향을 받지 않도록 하는 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-228">Although rare, if corruption does occur, ReFS implements salvage, a feature that removes the corrupt data from the namespace on a live volume and ensures that good data is not adversely affected by non-repairable corrupt data.</span></span> <span data-ttu-id="0d490-229">복구 기능을 적용하고 Exchange Online 데이터베이스 볼륨에 데이터 손상을 방지하면 손상된 볼륨과 복구 작업 시간 사이에 영향을 받지 않는 데이터베이스를 손상된 볼륨에 정상으로 유지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-229">Applying the Salvage feature and isolating data corruption to Exchange Online database volumes means that we can keep non-affected databases on a corrupted volume healthy between the time of corruption and repair action.</span></span> <span data-ttu-id="0d490-230">이 구조는 일반적으로 이러한 디스크 손상 문제의 영향을 받는 데이터베이스의 가용성을 증가합니다.</span><span class="sxs-lookup"><span data-stu-id="0d490-230">This structure increases the availability of databases that would normally be affected by such disk corruption issues.</span></span> 
